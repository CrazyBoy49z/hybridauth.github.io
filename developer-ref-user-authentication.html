<!DOCTYPE html>
<html lang="en">
	<title>User authentication - Hybridauth</title>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="http://fonts.googleapis.com/css?family=Roboto:100,200,300,400,700|Roboto+Condensed:400,700" rel="stylesheet" type="text/css">

	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet"> 
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="assets/css/prettify.css" rel="stylesheet"> 
	<link href="assets/css/style.css" rel="stylesheet">   

	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script> 
	<script type="text/javascript" src="assets/js/prettify.js"></script>
	<script type="text/javascript" src="assets/js/script.js"></script>
</head>
<body id="documentation">
	<header>
		<nav class="navbar navbar-fixed-top">
			<div class="navbar-header">
				<a class="navbar-brand" href="./index.html">Hybridauth</a>
			</div>

			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav navbar-right"> 
					<li><a href="https://github.com/hybridauth/hybridauth/releases" target="_blank">Download</a></li> 
					<li><a href="./documentation.html">Documentation</a></li>
					<li><a href="./getinvolved.html">Get involved</a></li> 
					<li style="margin-right:10px">
						<form action="./search.html" method="get">
							<input type="text" name="q" class="search-input" placeholder="Search">
						</form>
					</li>
				</ul>
			</div>
		</nav>
	</header>

 
	<div id="content" class="container container-documentation">
		<div class="block row">
			<div class="col col-md-12">

<!-- ... -->

<h1>User authentication</h1>

<h3>New way of doing things :</h3>

<pre class="prettyprint linenums">/**
* 1. Require the Hybridauth Library
*
* If you are using Composer, then `vendor/autoload.php` will autoload all the required classes for us,
* otherwise you may use the included Hybridauth PSR-4 compliant autoloader on the examples folder.
* To know more, refer to the installation section.
*/
include 'vendor/autoload.php'; // or include 'examples/hybridauth_autoload.php';

/**
* 2. Configuring your application
*
* Set the Authorization callback URL to http://example.com/hybridauth/examples/twitter.php.
* Understandably, you need to replace 'path/to/hybridauth' with the real path to this
* script.
*/
$config = [
    'callback' =&gt; 'http://example.com/hybridauth/examples/twitter.php',

    'keys' =&gt; [
        'key'    =&gt; 'your-consumer-key',
        'secret' =&gt; 'your-consumer-secret'
    ]
];

/**
* 3. Instantiate Twitter adapter using the array $config we just built.
*/
$twitter = new Hybridauth\Provider\Twitter( $config );

try {
    /**
    * 4. Logging the user in
    *
    * Hybridauth will attempt to negotiate with the Twitter api and authenticate the user. If the process
    * fails for whatever reason, then Hybridauth will throw an exception.
    *
    * If the user is authenticated, then subsequent calls to this method will be ignored (yield a boolean).
    * To know more, refer to Hybridauth full developer api.
    */
    $twitter-&gt;authenticate();

    # at this point the authentication process has succeeded, and we can proceed with our application logic.
    # the examples below are meant to give a quick overview for the kind actions that Hybridauth can execute
    # on behalf on the user.

    /**
    * 5. Retrieve the oauth access tokens
    */
    $accessToken = $twitter-&gt;getAccessToken();

    /**
    * 6. Retrieve the user profile
    */
    $userProfile = $twitter-&gt;getUserProfile();

    /**
    * 7. Retrieve the user contacts
    */
    $userContacts = $twitter-&gt;getUserContacts();

    /**
    * 8. Retrieve the user timeline
    */
    $apiResponse = $twitter-&gt;apiRequest( 'statuses/home_timeline.json' );

    // etc.
}
catch( Exception $e ){
    echo "Oops, we ran into an issue! " . $e-&gt;getMessage();
}
</pre>

<p><strong>Note:</strong> Optionally you may redefine the providers api end-points.</p>

<pre class="prettyprint linenums">$config = [
    'callback' =&gt; 'http://example.com/hybridauth/examples/twitter.php',

    'keys' =&gt; [
        'key'    =&gt; 'your-consumer-key',
        'secret' =&gt; 'your-consumer-secret'
    ],

    // Optional: Redefine providers endpoints
    'endpoints' =&gt; [
        'api_base_url'      =&gt; 'https://api.twitter.com/1.1/',
        'authorize_url'     =&gt; 'https://api.twitter.com/oauth/authenticate',
        'request_token_url' =&gt; 'https://api.twitter.com/oauth/request_token',
        'access_token_url'  =&gt; 'https://api.twitter.com/oauth/access_token',
    ]
];
</pre>

<h3>Authenticating a user with a pair of access tokens</h3>

<pre class="prettyprint linenums">$config = [
    'callback' =&gt; 'http://localhost/hybridauth/examples/twitter.php',

    'keys' =&gt; [
        'key'    =&gt; 'your-consumer-key',
        'secret' =&gt; 'your-consumer-secret'
    ],

    // Supply the twitter access tokens for the current user
    'tokens' =&gt; [
        'access_token'        =&gt; 'your-access-token',
        'access_token_secret' =&gt; 'your-access-token-secret',
    ]
];

$twitter = new Hybridauth\Provider\Twitter( $config );

try {
    /**
    * Retrieve the user profile
    *
    * Note that we didn't call `$twitter-&gt;authenticate()` as we already have the user access tokens and in
    * case these tokens has been revoked or expired, `$twitter-&gt;getUserProfile()` will throw an exception.
    * For more information, refer to Hybridauth full developer api.
    */
    $userProfile = $twitter-&gt;getUserProfile();
}
catch( Exception $e ){
    echo "Oops, we ran into an issue! " . $e-&gt;getMessage();
}
</pre>

<h3>Legacy way (Similar to Hybridauth 2.x)</h3>

<p><strong>Note:</strong> Please refer to <a href="developer-ref-migrating.html">Migrating to 3.0+</a> to make the necessary changes to your existing application in order to make it work with HybridAuth 3.x.</p>

<pre class="prettyprint linenums">// 
$config = array(
    'base_url'  =&gt; 'http://localhost/hybridauth/examples/callback.php',

    'providers' =&gt; array(
        'GitHub' =&gt; array(
            'enabled' =&gt; true,
            'keys'    =&gt; array ( 'id' =&gt; '', 'secret' =&gt; '' ),
        )
    )
);

// 
$hybridauth = new Hybridauth( $config );

try{
    //
    $github = $hybridauth-&gt;authenticate( "GitHub" );

    // 
    $user_profile = $github-&gt;getUserProfile();
}
catch( Exception $e ){
    echo "Oops, we ran into an issue! " . $e-&gt;getMessage();
}
</pre>


<!-- ... -->

                <hr />
                <br />
                <a name="comments"></a>
                <div style="padding: 8px;background-color:#FAFAFA;border: 1px solid #ccc;padding: 10px;text-align:center;box-shadow: 0 1px 3px rgba(0,0,0,0.13);">
                    <h4 style="border: 0px none; margin: 12px;">Please, do not submit issues here.</h4>

                    <p>This comment section is for a general questions and feedback. If you want to report a bug, please refer to the <a href="support.html">Support</a> section.</p>
                </div> 
                <br />
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'hybridauth'; // required: replace example with your forum shortname
                    var disqus_identifier = 'developer-ref-user-authentication.html';
                    var disqus_url = 'http://hybridauth.github.io/hybridauth/developer-ref-user-authentication.html';
                    
                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>

                <br />
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="row"> 
                <ul>
                    <li><a href="./index.html">Home</a></li>
					<li><a href="https://github.com/hybridauth/hybridauth/releases" target="_blank">Download</a></li> 
					<li><a href="./documentation.html">Documentation</a></li>
					<li><a href="./getinvolved.html">Get involved</a></li> 
                    <li><a href="./license.html">License</a></li> 
                    &mdash;
					<li><a href="https://github.com/hybridauth/hybridauth" target="_blank">Github</a></li> 
					<li><a href="https://gitter.im/hybridauth/hybridauth" target="_blank">Gitter</a></li> 
                </ul>
            </div>
        </div>
    </footer>
</body>
</html>
